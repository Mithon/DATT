<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>thought</title>
    <style>
        body {
            margin: 0;
        }

        canvas {
            padding-left: 0;
            padding-right: 0;
            display: block;
        }

        a {
            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
            background-color: #41454d;
            color: white;
            font-size: 1em;
            position: absolute;
            top: 20px;
            left: 20px;
            cursor: default;

            padding: 10px 20px;
            border-radius: 2px;
            opacity: 0;
            text-decoration: none;

            -webkit-transition: all 0.5s ease;
            -moz-transition: all 0.5s ease;
            transition: all 0.5s ease;

            box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.4);
        }

        a:hover {
            -webkit-transition: all 0.25s ease;
            -moz-transition: all 0.25s ease;
            transition: all 0.25s ease;

            transform: scale(1.1);

            box-shadow: 0 8px 30px 0 rgba(0, 0, 0, 0.4);
        }

        .show {
            cursor: pointer;
            opacity: 1;
        }
    </style>
</head>

<body>

    <canvas id="mainCanvas" width="1280" height="800">
    </canvas>

    <a id="next" href="brief.html">continue...</a>

    <script>
        var frames = 0;
        var count = 0;
        var cap = false;
        var mouseX = 0;
        var mouseY = 0;
        var disX = 0;
        var disY = 0;
        var mouseOldX = 0;
        var mouseOldY = 0;
        var stillCounter = 0;
        var focusShow = true;

        var sound = new Audio("audio/facebook.wav");
        var lSound = new Audio("audio/facebook-left.wav");
        var rSound = new Audio("audio/facebook-right.wav");


        var play = true;

        function getRanNum(min, max) {
            return Math.round(Math.random() * (max - min) + min);
        }



        function draw() {
            var canvas = document.getElementById("mainCanvas");
            var ctx = canvas.getContext("2d");
            ctx.globalCompositeOperation = 'destination-over';
            //ctx.clearRect(0, 0, 1280, 800); // clear canvas

            canvas.addEventListener('mousemove', function(e){
                mouseX = e.clientX;
                mouseY = e.clientY;
            });

            canvas.addEventListener('click', function(e){
                ctx.clearRect(mouseX-200, mouseY-200, 400, 400);
            });

            if (mouseX == mouseOldX && mouseY == mouseOldY) {
                stillCounter++;
            }

            mouseOldX = mouseX;
            mouseOldY = mouseY;

            frames++;

            var time = new Date();


            if (time.getMilliseconds() % 31 == 0 && play == true)   {
                var loc = Math.round(Math.random()*3) + 1;

                if (loc == 1) {
                    rSound.play();
                }
                else if (loc == 2) {
                    lSound.play();
                }
                else {
                    sound.play();
                }

            }


            if (stillCounter == 200) {
                ctx.clearRect(0, 0, 3000, 3000);
                focusShow = false;
            }

            if (stillCounter > 666) {
                play = false;
                document.getElementById("next").className = "show";
            }


            if (count == 50)
                cap = true;

            if (count == 0)
                cap = false;


            if (cap == false)
                count++;

            if (cap)
                count--;

            var time = new Date();

            ctx.save();
            ctx.font = "78px sans-serif";
            if (focusShow)
                ctx.fillText("focus.", canvas.width/2, canvas.height/2);
            ctx.restore();



            ctx.moveTo(mouseX, mouseY);

            ctx.translate(canvas.width/2, canvas.height/2);
            ctx.rotate((Math.PI/180)*1);
            ctx.translate(-1*(canvas.width/2), -1*(canvas.height/2));
            ctx.fillText("hi", mouseX+count*3, mouseY+count*3);
            ctx.fillText("procrastinate", mouseX+count*3*1.3, mouseY+count*3);
            ctx.fillText("procrastinate", mouseX-count*3*1.3, mouseY-count*3);
            ctx.fillText("procrastinate", mouseX-count*3*1.3, mouseY+count*3);
            ctx.fillText("procrastinate", mouseX+count*3*1.3, mouseY-count*3);
            ctx.fillStyle = "rgb(" + 0 + ", " + Math.round(255-2*count) + ", " + Math.round(255-2*count) + ")";


            ctx.fill();
            ctx.stroke();

            window.requestAnimationFrame(draw);
        }


        window.requestAnimationFrame(draw);
    </script>
</body>
</body>

</html>
